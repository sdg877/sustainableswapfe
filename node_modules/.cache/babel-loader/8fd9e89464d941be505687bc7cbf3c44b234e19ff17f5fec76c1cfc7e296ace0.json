{"ast":null,"code":"import{Form,Button}from\"react-bootstrap\";import axios from\"axios\";import{useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignupForm(){const userRef=useRef();const emailRef=useRef();const pwdRef=useRef();async function handleSubmit(e){e.preventDefault();const user={username:userRef.current.value,email:emailRef.current.value,password:pwdRef.current.value};try{await axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/signup/\"),user,{headers:{\"Content-Type\":\"application/json\"}},{withCredentials:true});const loginData={username:user.username,password:user.password};const response=await axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/token/\"),loginData,{headers:{\"Content-Type\":\"application/json\"}},{withCredentials:true});if(response&&response.data&&response.data.access){localStorage.setItem(\"access_token\",response.data.access);console.log('Login successful. Access token:',response.data.access);window.location.href=\"/\";}else{console.error('Login failed. Response:',response);}}catch(error){console.error('Error signing up or logging in:',error);}}return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,className:\"Auth-form\",children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:userRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",ref:emailRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",ref:pwdRef,required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2 mt-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Sign Up\"})})]});}","map":{"version":3,"names":["Form","Button","axios","useRef","jsx","_jsx","jsxs","_jsxs","SignupForm","userRef","emailRef","pwdRef","handleSubmit","e","preventDefault","user","username","current","value","email","password","post","concat","process","env","REACT_APP_BACKEND_URL","headers","withCredentials","loginData","response","data","access","localStorage","setItem","console","log","window","location","href","error","onSubmit","className","children","Group","Label","Control","type","ref","required","variant"],"sources":["/Users/sylviadrake-gill/code/sustainableswapshop/frontend/my-react-app/src/Components/SignUpForm.jsx"],"sourcesContent":["import { Form, Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useRef } from \"react\";\n\nexport default function SignupForm() {\n  const userRef = useRef();\n  const emailRef = useRef();\n  const pwdRef = useRef();\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const user = {\n      username: userRef.current.value,\n      email: emailRef.current.value,\n      password: pwdRef.current.value,\n    };\n\n    try {\n      await axios.post(\n        `${process.env.REACT_APP_BACKEND_URL}/signup/`,\n        user,\n        {\n          headers: { \"Content-Type\": \"application/json\" },\n        },\n        {\n          withCredentials: true,\n        }\n      );\n\n      const loginData = {\n        username: user.username,\n        password: user.password,\n      };\n\n      const response = await axios.post(\n        `${process.env.REACT_APP_BACKEND_URL}/token/`,\n        loginData,\n        {\n          headers: { \"Content-Type\": \"application/json\" },\n        },\n        {\n          withCredentials: true,\n        }\n      );\n\n      if (response && response.data && response.data.access) {\n        localStorage.setItem(\"access_token\", response.data.access);\n        console.log('Login successful. Access token:', response.data.access);\n        window.location.href = \"/\"; \n      } else {\n        console.error('Login failed. Response:', response);\n      }\n    } catch (error) {\n      console.error('Error signing up or logging in:', error);\n    }\n  }\n\n  return (\n    <Form onSubmit={handleSubmit} className=\"Auth-form\">\n      <Form.Group className=\"mb-3\">\n        <Form.Label>Username</Form.Label>\n        <Form.Control type=\"text\" ref={userRef} required />\n      </Form.Group>\n      <Form.Group className=\"mb-3\">\n        <Form.Label>Email</Form.Label>\n        <Form.Control type=\"email\" ref={emailRef} required />\n      </Form.Group>\n      <Form.Group className=\"mb-3\">\n        <Form.Label>Password</Form.Label>\n        <Form.Control type=\"password\" ref={pwdRef} required />\n      </Form.Group>\n      <div className=\"d-grid gap-2 mt-3\">\n        <Button type=\"submit\" variant=\"primary\">\n          Sign Up\n        </Button>\n      </div>\n    </Form>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}