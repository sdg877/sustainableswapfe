{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{v4 as uuidv4}from'uuid';import{currentUser}from'../lib/currentUser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ItemCreate(){const[formData,setFormData]=useState({item_title:'',item_description:'',image:null,listing_active:true,user:currentUser()});const handleChange=e=>{if(e.target.name==='image'){setFormData({...formData,[e.target.name]:e.target.files[0]});}else{setFormData({...formData,[e.target.name]:e.target.value});}};const handleImageChange=e=>{const myFile=e.target.files[0];const blob=myFile.slice(0,myFile.size);const fileExt=myFile.name.split('.').pop();const newFile=new File([blob],\"\".concat(uuidv4(),\".\").concat(fileExt),{type:\"\".concat(myFile.type)});setFormData({...formData,image:newFile});};const handleSubmit=e=>{e.preventDefault();const formDataToSend=new FormData();formDataToSend.append('item_title',formData.item_title);formDataToSend.append('item_description',formData.item_description);formDataToSend.append('listing_active',formData.listing_active);formDataToSend.append('user',formData.user);formDataToSend.append('image',formData.image);axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/items/\"),formDataToSend,{headers:{'Content-Type':'multipart/form-data'}}).then(response=>{console.log('Item added successfully:',response.data);window.location.href='/';}).catch(error=>{console.error('Error:',error.response.data);});};return/*#__PURE__*/_jsx(\"div\",{className:\"Auth-form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"item_title\",className:\"form-label\",children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"item_title\",name:\"item_title\",value:formData.item_title,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"item_description\",className:\"form-label\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"item_description\",name:\"item_description\",value:formData.item_description,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",className:\"form-label\",children:\"Image:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",name:\"image\",onChange:handleImageChange,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2 mt-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})})]})});}export default ItemCreate;","map":{"version":3,"names":["React","useState","axios","v4","uuidv4","currentUser","jsx","_jsx","jsxs","_jsxs","ItemCreate","formData","setFormData","item_title","item_description","image","listing_active","user","handleChange","e","target","name","files","value","handleImageChange","myFile","blob","slice","size","fileExt","split","pop","newFile","File","concat","type","handleSubmit","preventDefault","formDataToSend","FormData","append","post","process","env","REACT_APP_BACKEND_URL","headers","then","response","console","log","data","window","location","href","catch","error","className","children","onSubmit","htmlFor","id","onChange"],"sources":["/Users/sylviadrake-gill/code/sustainableswapshop/frontend/my-react-app/src/Components/ItemCreate.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { v4 as uuidv4 } from 'uuid';\nimport { currentUser } from '../lib/currentUser';\n\nfunction ItemCreate() {\n    const [formData, setFormData] = useState({\n        item_title: '',\n        item_description: '',\n        image: null, \n        listing_active: true,\n        user: currentUser()\n    });\n\n    const handleChange = (e) => {\n        if (e.target.name === 'image') {\n            setFormData({\n                ...formData,\n                [e.target.name]: e.target.files[0]\n            });\n        } else {\n            setFormData({\n                ...formData,\n                [e.target.name]: e.target.value\n            });\n        }\n    };\n\n    const handleImageChange = (e) => {\n        const myFile = e.target.files[0] \n        const blob = myFile.slice(0, myFile.size);\n        const fileExt = myFile.name.split('.').pop();\n        const newFile = new File([blob], `${uuidv4()}.${fileExt}`, { type: `${myFile.type}` });\n        setFormData({\n            ...formData,\n            image: newFile\n        });\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        \n        const formDataToSend = new FormData();\n        formDataToSend.append('item_title', formData.item_title);\n        formDataToSend.append('item_description', formData.item_description);\n        formDataToSend.append('listing_active', formData.listing_active);\n        formDataToSend.append('user', formData.user);\n        formDataToSend.append('image', formData.image); \n        \n        axios.post(`${process.env.REACT_APP_BACKEND_URL}/items/`, formDataToSend, {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        })\n            .then(response => {\n                console.log('Item added successfully:', response.data);\n\n                window.location.href = '/';\n            })\n            .catch(error => {\n                console.error('Error:', error.response.data);\n            });\n    };\n\n    return (\n        <div className=\"Auth-form\">\n            <form onSubmit={handleSubmit}>\n                <div className=\"mb-3\">\n                    <label htmlFor=\"item_title\" className=\"form-label\">Title:</label>\n                    <input type=\"text\" id=\"item_title\" name=\"item_title\" value={formData.item_title} onChange={handleChange} className=\"form-control\" />\n                </div>\n                <div className=\"mb-3\">\n                    <label htmlFor=\"item_description\" className=\"form-label\">Description:</label>\n                    <textarea id=\"item_description\" name=\"item_description\" value={formData.item_description} onChange={handleChange} className=\"form-control\"></textarea>\n                </div>\n                <div className=\"mb-3\">\n                    <label htmlFor=\"image\" className=\"form-label\">Image:</label>\n                    <input type=\"file\" id=\"image\" name=\"image\" onChange={handleImageChange} className=\"form-control\" />\n                </div>\n                <div className=\"d-grid gap-2 mt-3\">\n                    <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n                </div>\n            </form>\n        </div>\n    );\n}\n\nexport default ItemCreate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}